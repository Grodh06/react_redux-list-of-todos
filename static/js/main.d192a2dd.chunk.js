(this["webpackJsonpreact_redux-list-of-todos"]=this["webpackJsonpreact_redux-list-of-todos"]||[]).push([[0],{24:function(e,t,c){},25:function(e,t,c){},29:function(e,t,c){"use strict";c.r(t);var n=c(7),s=c.n(n),a=c(4),o=c(16),r=c(6),i=c(12),l=c(13),d=c(2),u={query:"",completed:"filter-all"},j=function(e){return{payload:"",type:e}},b=function(e){return{payload:e,type:"set-query"}},h={todosLoading:!1,userLoading:!1},f=function(){return{type:"todos/loading-start"}},O=function(){return{type:"todos/loading-finish"}},m=function(){return{type:"user/loading-start"}},p=function(){return{type:"user/loading-finish"}},x={todos:[],choosenTodo:null},v=function(e){return{type:"todos/set",payload:e}},g=function(e){return{type:"todo/choose",payload:e}},y=function(e){return{type:"user/set",payload:e}},N=Object(r.combineReducers)({todos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"todos/set":return Object(d.a)(Object(d.a)({},e),{},{todos:t.payload});case"todo/choose":return Object(d.a)(Object(d.a)({},e),{},{choosenTodo:e.todos.find((function(e){return e.id===t.payload}))||null});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return"user/set"===t.type?t.payload:e},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"todos/loading-start":return Object(d.a)(Object(d.a)({},e),{},{todosLoading:!0});case"todos/loading-finish":return Object(d.a)(Object(d.a)({},e),{},{todosLoading:!1});case"user/loading-start":return Object(d.a)(Object(d.a)({},e),{},{userLoading:!0});case"user/loading-finish":return Object(d.a)(Object(d.a)({},e),{},{userLoading:!1});default:return e}},filter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"filter-all":return Object(d.a)(Object(d.a)({},e),{},{completed:"filter-all"});case"filter-completed":return Object(d.a)(Object(d.a)({},e),{},{completed:"filter-completed"});case"filter-active":return Object(d.a)(Object(d.a)({},e),{},{completed:"filter-active"});case"set-query":return Object(d.a)(Object(d.a)({},e),{},{query:t.payload});default:return e}}}),k=Object(r.createStore)(N,Object(i.composeWithDevTools)(Object(r.applyMiddleware)(l.a))),w=a.c,T=c(0);function L(e){return(t=1e3,new Promise((function(e){setTimeout(e,t)}))).then((function(){return fetch("https://mate.academy/students-api"+e)})).then((function(e){return e.json()}));var t}c(24),c(25);var C=c(1),q=function(){return Object(C.jsx)("div",{className:"Loader",children:Object(C.jsx)("div",{className:"Loader__content"})})},E=c(5),S=c(14),_=function(){var e=Object(a.b)(),t=Object(T.useState)(""),c=Object(E.a)(t,2),n=c[0],s=c[1],o=Object(T.useCallback)(Object(S.debounce)((function(t){return e(b(t))}),500),[]);return Object(C.jsxs)("form",{className:"field has-addons",children:[Object(C.jsx)("p",{className:"control",children:Object(C.jsx)("span",{className:"select",children:Object(C.jsxs)("select",{onChange:function(t){return c=t.target.value,void e(j(c));var c},children:[Object(C.jsx)("option",{value:"filter-all",children:"All"}),Object(C.jsx)("option",{value:"filter-active",children:"Active"}),Object(C.jsx)("option",{value:"filter-completed",children:"Completed"})]})})}),Object(C.jsxs)("p",{className:"control is-expanded has-icons-left has-icons-right",children:[Object(C.jsx)("input",{"data-cy":"filterByTitle",type:"text",className:"input",placeholder:"Search...",value:n,onChange:function(e){s(e.target.value),o(e.target.value)}}),Object(C.jsx)("span",{className:"icon is-left",children:Object(C.jsx)("i",{className:"fas fa-magnifying-glass"})}),n&&Object(C.jsx)("span",{className:"icon is-right",style:{pointerEvents:"all"},children:Object(C.jsx)("button",{type:"button",className:"delete has-text",onClick:function(){s(""),e(b("")),e(j("filter-all"))}})})]})]})},A=c(15),B=c.n(A),D=function(e){var t=e.todos,c=Object(a.b)();return Object(C.jsx)("table",{"data-cy":"listOfTodos",className:"table is-narrow is-fullwidth",children:Object(C.jsx)("tbody",{children:t.map((function(e){return Object(C.jsxs)("tr",{className:e.completed?"has-background-success-light has-text-success":"has-background-danger-light has-text-danger",children:[Object(C.jsx)("td",{className:"is-vcentered",children:Object(C.jsx)("span",{className:"icon is-size-5",children:Object(C.jsx)("i",{className:B()("fas",{"fas fa-check-square":e.completed,"fa-square-xmark":!e.completed})})})}),Object(C.jsx)("td",{className:"is-vcentered is-expanded",children:e.title}),Object(C.jsx)("td",{className:"has-text-right is-vcentered",children:Object(C.jsx)("button",{className:"button is-warning",type:"button",onClick:function(){c(g(e.id))},children:"Show : #".concat(e.id)})})]},e.id)}))})})},F=function(e){var t=e.choosenTodo,c=Object(a.b)(),n=w((function(e){return e.user}));return Object(T.useEffect)((function(){var e;c(m()),(e=t.userId,L("/users/".concat(e))).then((function(e){c(y(e))})).finally((function(){return c(p())}))}),[]),Object(C.jsxs)("div",{className:"modal is-active",children:[Object(C.jsx)("div",{className:"modal-background"}),n?Object(C.jsx)(C.Fragment,{children:t?Object(C.jsxs)("div",{className:"modal-card",children:[Object(C.jsxs)("header",{className:"modal-card-head",children:[Object(C.jsx)("div",{className:"modal-card-title has-text-weight-medium",children:"Todo: #".concat(t.id)}),Object(C.jsx)("a",{href:"#close",className:"delete",onClick:function(){c(g(null)),c(y(null))},children:"Close"})]}),Object(C.jsxs)("div",{className:"modal-card-body",children:[Object(C.jsx)("p",{className:"block",children:t.title}),Object(C.jsxs)("p",{className:"block",children:[t.completed?Object(C.jsx)("strong",{className:"has-text-success",children:"Done"}):Object(C.jsx)("strong",{className:"has-text-danger",children:"Planned"})," by ",Object(C.jsx)("a",{href:"mailto:".concat(null===n||void 0===n?void 0:n.email),children:null===n||void 0===n?void 0:n.name})]})]})]}):"no todo"}):Object(C.jsx)(q,{})]})},I=function(){var e=Object(a.b)(),t=w((function(e){return e.loading})).todosLoading,c=w((function(e){return e.todos})).choosenTodo,n=w((function(e){var t=e.filter.query,c=e.filter.completed;return e.todos.todos.filter((function(e){switch(c){case"filter-active":return!e.completed;case"filter-completed":return e.completed;default:return!0}})).filter((function(e){return e.title.includes(t)}))}));return Object(T.useEffect)((function(){e(f()),L("/todos").then((function(t){e(v(t))})).finally((function(){return e(O())}))}),[]),Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("div",{className:"section",children:Object(C.jsx)("div",{className:"container",children:Object(C.jsxs)("div",{className:"box",children:[Object(C.jsx)("h1",{className:"title",children:"Todos:"}),Object(C.jsx)("div",{className:"block",children:Object(C.jsx)(_,{})}),Object(C.jsxs)("div",{className:"block",children:[t&&Object(C.jsx)(q,{}),!t&&n.length>0&&Object(C.jsx)(D,{todos:n})]})]})})}),c&&Object(C.jsx)(F,{choosenTodo:c})]})},J=function(){return Object(C.jsx)(a.a,{store:k,children:Object(C.jsx)(o.a,{children:Object(C.jsx)(I,{})})})};s.a.render(Object(C.jsx)(J,{}),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.d192a2dd.chunk.js.map